syntax = "proto3";

package com.coralogix.schemastore.v1;

import "com/coralogix/schemastore/v1/common.proto";

message MetricNamesRequest {
  repeated uint32 team_ids = 1;
  TimeRange time_range = 2;
  string name = 3;
  int32 result_limit = 4;
  repeated LabelFilter label_filters = 5;
}

message MetricNamesResponse {
  repeated MetricField metrics = 1;
}


message MetricLabelsRequest {
  repeated uint32 team_ids = 1;
  TimeRange time_range = 2;
  // Deprecated: please use exact_names instead
  string exact_name = 3 [deprecated = true];
  repeated string exact_names = 10;
  repeated LabelFilter label_filters = 4;
  repeated string result_label_filter = 5;
  repeated string result_label_value_filter = 8;
  MatchMode result_label_value_match_mode = 9;
  int32 result_limit = 6;
  int32 label_values_per_result = 7;
}

message MetricLabelsResponse {
  // Returned when no names are specified in the request
  repeated MetricLabel labels = 1;
  // Returned when a labels for list of exact_names is requested
  repeated MetricLabelsByName labels_by_name = 2;
}

message MetricLabelsByName {
  string name = 1;
  repeated MetricLabel labels = 2;
}

message MetricField {
  string name = 1;
}

message MetricLabel {
  string key = 1;
  repeated string value = 2;
  bool is_cardinality_protected = 3;
}
