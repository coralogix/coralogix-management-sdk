syntax = "proto3";

package com.coralogix.integrations.v1;

import "google/protobuf/wrappers.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

message TimestampSourceGenerate {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Timestamp Source Generate"
      description: "Indicates that the timestamp will be autogenerated"
      required: []
    }
  };
}

message TimestampFormatAutomatic {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Timestamp Format Automatic"
      description: "Indicates that the timestamp will be automatically formatted"
      required: []
    }
  };
}
message TimestampFormatCustom {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Timestamp Format Custom"
      description: "Indicates that the timestamp has a custom format/pattern"
      required: ["format"]
    }
  };
  google.protobuf.StringValue format = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {example: "\"dd/MM/yyyy hh:mm:ss\""}];
}

message TimestampSourceJsonPath {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Timestamp Source Json Path"
      description: "Indicates that the timestamp source is a json path"
      required: ["format", "json_path"]
    }
  };
  google.protobuf.StringValue json_path = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {example: "\"$.field.date\""}];
  oneof format {
    TimestampFormatAutomatic automatic = 101;
    TimestampFormatCustom custom = 102;
  }
}

message TimestampSourceRegex {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Timestamp Source Regex"
      description: "Indicates that which regex should be used to extract the timestamp from the request text"
      required: ["format", "regex"]
    }
  };
  google.protobuf.StringValue regex = 1 [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {example: "\"^[0-9]{4}\""}];
  oneof format {
    TimestampFormatAutomatic automatic = 101;
    TimestampFormatCustom custom = 102;
  }
}

message JsonContentType {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Json Content Type"
      description: "Indicates where to find the timestamp in the json request"
      required: ["timestamp_source"]
    }
  };
  oneof timestamp_source {
    TimestampSourceGenerate generate = 1;
    TimestampSourceJsonPath json_path = 2;
  }
}

message TextContentType {
  option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_schema) = {
    json_schema: {
      title: "Json Content Type"
      description: "Indicates how to find the timestamp in the text request"
      required: ["timestamp_source"]
    }
  };
  oneof timestamp_source {
    TimestampSourceGenerate generate = 1;
    TimestampSourceRegex regex = 2;
  }
}
